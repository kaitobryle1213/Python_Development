{% extends 'base.html' %}

{% block title %}Edit Item - POS System{% endblock %}

{% block content %}
<div class="pos-container-modern">
    <!-- Header Section -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <h1 style="margin: 0; color: #333; font-size: 28px;">‚úèÔ∏è Edit Item</h1>
        <a href="{% url 'item_list' %}" class="btn-cancel-modern">‚Üê Back to Items</a>
    </div>
    
    <!-- Error Messages -->
    {% if errors %}
        <div style="margin-bottom: 20px;">
            {% for error in errors %}
                <div class="alert alert-danger" style="padding: 12px 15px; border-radius: 8px; margin-bottom: 10px; background: #fee; border-left: 4px solid #f5576c; color: #c33;">
                    ‚ö†Ô∏è {{ error }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
    
    <!-- Item Form Card -->
    <div class="form-card">
        <div class="card-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
            <h2 style="margin: 0; display: flex; align-items: center; gap: 10px;">üì¶ Item Information</h2>
        </div>
        <div class="card-body">
            <form method="POST" style="max-width: 800px;">
                {% csrf_token %}
                
                <!-- Item Code (Read-only) -->
                <div class="form-row">
                    <div>
                        <label for="item_code" style="display: block; font-weight: 600; color: #667eea; font-size: 12px; text-transform: uppercase; margin-bottom: 8px;">Item Code</label>
                        <input 
                            type="text" 
                            id="item_code" 
                            value="{{ item.item_code }}"
                            disabled
                            style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; background-color: #f5f5f5; color: #999;"
                        />
                    </div>
                </div>
                
                <!-- Item Description Field -->
                <div class="form-row">
                    <div>
                        <label for="item_description" style="display: block; font-weight: 600; color: #667eea; font-size: 12px; text-transform: uppercase; margin-bottom: 8px;">Item Description *</label>
                        <input 
                            type="text" 
                            id="item_description" 
                            name="item_description" 
                            class="form-input" 
                            placeholder="Enter item description"
                            value="{{ form_data.item_description|default:item.item_description }}"
                            required
                            style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; transition: all 0.3s ease;"
                        />
                    </div>
                </div>
                
                <!-- Unit of Measure Field -->
                <div class="form-row">
                    <div>
                        <label for="unit_of_measure" style="display: block; font-weight: 600; color: #667eea; font-size: 12px; text-transform: uppercase; margin-bottom: 8px;">Unit of Measure *</label>
                        <select 
                            id="unit_of_measure" 
                            name="unit_of_measure" 
                            class="form-input" 
                            required
                            style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white; cursor: pointer; transition: all 0.3s ease;"
                        >
                            {% for value, label in unit_choices %}
                                <option value="{{ value }}" {% if form_data.unit_of_measure|default:item.unit_of_measure == value %}selected{% endif %}>{{ label }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                
                <!-- Unit Cost and Selling Price Row -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label for="unit_cost" style="display: block; font-weight: 600; color: #667eea; font-size: 12px; text-transform: uppercase; margin-bottom: 8px;">Unit Cost *</label>
                        <div style="position: relative;">
                            <span style="position: absolute; left: 12px; top: 10px; color: #667eea; font-weight: 600;">‚Ç±</span>
                            <input 
                                type="number" 
                                id="unit_cost" 
                                name="unit_cost" 
                                class="form-input" 
                                placeholder="0.00"
                                value="{{ form_data.unit_cost|default:item.unit_cost }}"
                                step="0.01"
                                min="0"
                                required
                                style="width: 100%; padding: 10px 10px 10px 30px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; transition: all 0.3s ease;"
                            />
                        </div>
                    </div>
                    <div>
                        <label for="unit_selling_price" style="display: block; font-weight: 600; color: #667eea; font-size: 12px; text-transform: uppercase; margin-bottom: 8px;">Unit Selling Price *</label>
                        <div style="position: relative;">
                            <span style="position: absolute; left: 12px; top: 10px; color: #667eea; font-weight: 600;">‚Ç±</span>
                            <input 
                                type="number" 
                                id="unit_selling_price" 
                                name="unit_selling_price" 
                                class="form-input" 
                                placeholder="0.00"
                                value="{{ form_data.unit_selling_price|default:item.unit_selling_price }}"
                                step="0.01"
                                min="0"
                                required
                                style="width: 100%; padding: 10px 10px 10px 30px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; transition: all 0.3s ease;"
                            />
                        </div>
                    </div>
                </div>
                
                <!-- Quantity on Hand Field -->
                <div class="form-row">
                    <div>
                        <label for="quantity_on_hand" style="display: block; font-weight: 600; color: #667eea; font-size: 12px; text-transform: uppercase; margin-bottom: 8px;">Quantity on Hand *</label>
                        <input 
                            type="number" 
                            id="quantity_on_hand" 
                            name="quantity_on_hand" 
                            class="form-input" 
                            placeholder="0"
                            value="{{ form_data.quantity_on_hand|default:item.quantity_on_hand }}"
                            min="0"
                            required
                            style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; transition: all 0.3s ease;"
                        />
                    </div>
                </div>
                
                <!-- Audit Information (Read-only) -->
                <hr style="margin: 30px 0; border: none; border-top: 1px solid #ddd;">
                
                <h3 style="color: #667eea; font-size: 14px; font-weight: 600; text-transform: uppercase; margin-bottom: 20px;">‚è±Ô∏è Audit Information</h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; font-weight: 600; color: #667eea; font-size: 12px; text-transform: uppercase; margin-bottom: 8px;">Created By</label>
                        <input 
                            type="text" 
                            value="{% if item.created_by %}{{ item.created_by.first_name|default:item.created_by.username }}{% else %}System{% endif %}"
                            disabled
                            style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; background-color: #f5f5f5; color: #999;"
                        />
                    </div>
                    <div>
                        <label style="display: block; font-weight: 600; color: #667eea; font-size: 12px; text-transform: uppercase; margin-bottom: 8px;">Created Date</label>
                        <input 
                            type="text" 
                            value="{{ item.created_at|date:'M d, Y H:i' }}"
                            disabled
                            style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; background-color: #f5f5f5; color: #999;"
                        />
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="form-row" style="display: flex; gap: 10px; margin-top: 30px;">
                    <button type="submit" class="btn-save-modern" style="flex: 1; margin: 0;">üíæ Update Item</button>
                    <a href="{% url 'item_list' %}" class="btn-cancel-modern" style="flex: 1; text-align: center; display: flex; align-items: center; justify-content: center;">‚úñÔ∏è Cancel</a>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
.form-input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.form-row {
    margin-bottom: 20px;
}
</style>
{% endblock %}
